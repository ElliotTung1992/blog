#### 乐观锁和悲观锁

---

我们可以从锁的加锁策略可以把锁分为: 悲观锁和乐观锁

##### 悲观锁

对于悲观锁来说, 它总是认为每次访问共享资源时就会发生冲突, 所以必须每次对数据进行操作都加上锁, 以保证临界区的程序同一时间只能有一个线程在执行.

##### 乐观锁

对于乐观锁来说, 它总是认为每次访问共享资源时不会发生冲突, 线程可以不停地执行, 无需加锁也无需等待.

一旦多个线程之间发生了冲突, 乐观锁通常使用一种称为CAS的技术保证线程执行的安全性.

由于乐观锁假象操作中没有锁的存在, 因此不太可能出现死锁的情况.

##### 乐观锁和悲观锁之间的差异

乐观锁多用于"读多写少"的场景, 避免频繁加锁影响性能.

悲观锁多用于"写多读少"的场景, 避免频繁加锁失败和重试影响性能.



#### Java中的锁

---

1. synchronized
2. Lock



#### synchronized关键字

---

##### synchronized的特点:

1. 可重入锁

##### synchronized修饰方法

1. synchronized修饰普通方法 - 对象锁
2. synchronized修饰静态方法 - 类锁

##### synchronized修饰代码块

1. synchronized修饰this关键字 - 对象锁
2. synchronized修饰类对象 - 类锁
3. synchronized修饰自定义对象 - 对象锁