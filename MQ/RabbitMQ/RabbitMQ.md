### RabbitMQ架构

---

![image-20240903194442505](/Users/ganendong/Library/Application Support/typora-user-images/image-20240903194442505.png)

##### Broker:

​	表示消息队列服务器实体

##### Virtual Host 虚拟主机:

​	在RabbitMQ中叫vhost, 表示一批交换机、消息队列和相关对象.

​	虚拟主机是共享相同的身份证和加密环境的独立服务器域.

​	本质上每个vhost就是一台缩小版的RabbitMQ服务器, 它拥有自己的队列、交换机、绑定和权限机制.

​	vhost是AMQP概念的基础, 必须在连接时指定, RabbitMq默认的vhost是'/'.

##### Connection 网络连接:

​	比如一个TCP连接

##### Channel 通道:

​	多路复用连接中的一条独立的双向数据流通道.

​	通道是建立在真实的TCP连接内的虚拟连接.

​	AMQP命令都是通过信通发送出去的, 不管是发布消息、订阅队列还是接收消息, 这些动作都是通过

​	通道完成的. 因为对于操作系统来说, 建立和销毁TCP连接都是非常昂贵的开销, 所以引入通道的概念,

​	已复用一个TCP连接.

##### Publisher 消息生产者:

​	一个向交换机发布消息的客户端应用程序.

##### Consumer 消息消费者:

​	表示一个从消息队列获得消息的客户端应用程序.

##### Queue 队列:

​	用来保存消息直到发送给消费者.

​	它是消息的容器, 也是消息的终点.

​	一条消息可以被投递到一个或多个队列中, 消息一直在队列中, 等待消费者连接到队列消费消息.

##### Exchange 交换机:

​	用来接收生产者发送的消息, 并将这些消息路由给路由器中的队列.

##### Binding 绑定:

​	用于消息队列和交换机之间的关联. 

​	一个绑定就是基于路由键将交换机和消息队列连接起来的路由规则, 所以可以交换机理解为一个由绑定构成的路由表.

##### Routing Key 路由主键: 

​	RabbitMQ中, Exchange(交换机)负责接收来自生产者的消息, 并根据Routing Key将消息到一个或多个队列中.

​	Exchange与队列之间的绑定关系是通过Binding Key来确定的. 

​	当生产者发送消息时, 需要指定一个Routing Key, Exchange根据Routing Key将消息发送到与之匹配的队列中.

##### Message 消息队列:

​	消息是不具名的, 它由消息头和消息体.

​	消息体是不透明的, 而消息头则由一系列可选属性组成, 这些属性包括routing-key(路由键)、priority(消息优先级)、

​	delivery-mode(消息可能需要持久化存储等).



#### 乱序问题

---



#### 重复消费问题

---



#### 幂等性问题

---





















