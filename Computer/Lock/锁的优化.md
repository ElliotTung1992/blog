#### 锁的优化

---

1. 尽量不加锁
2. 尽量用最小的锁

##### 尽量不加锁

1. 增减库存；对扣减库存进行加锁防止超发；但是对于增加库存就不需要加锁了

##### 尽量用最小的锁

1. 能用行锁的不用表锁

2. 能用数据库锁尽量不用分布式锁

3. 扣减库存；在扣减库存的时候我们只需要保证扣减的量不要超过剩余数就可以了，而不需要剩余数等于查询出来的剩余数

   