#### 数据库SQL常见优化手段

---

1. 任何地方都不要使用select * from table, 使用具体的字段列表代替 *, 不返回用不到的数据
2. 尽量避免子查询
3. 用in替换or
4. 查询数据时, 使用Limit M N读取适当的数据, 而不读取多余的数据
5. 总和查询可以使用禁止排序去重的union all
6. 将多次插入替换成批量插入
7. 区分in和exists



#### 避免子查询

---

**原因**: 子查询效率太差, MySQL在执行子查询时, 需要创建临时表, 所以子查询的速度会受到一定的影响, 这里多了一个创建和销毁临时表的过程.

**优化手段**: 尽量使用join去替换子查询



#### 用in替换or

---

查询字段在没有主键或者索引的情况下, 随着in和or后面的查询数据越来越多, 

or的执行效率会明显下降, and的执行效率不会明显下降



#### 查询数据时, 使用Limit M N读取适当的数据, 而不读取多余的数据

---

分页查询:

```
select * from table limit m,n;
```

上述SQL会随着m值的增大而变慢.

在特定的条件下, 我们可以利用主键自增的特点, 取上一页最大的主键进行过滤进行再取对应的数据

```
select * from table where id > x limit n;
```



#### UNION和UNION ALL的区别

---

##### 去重处理:

1. UNION: 合并两个或多个select语句的查询结果集时, 会自动去除重复的行, 确保最终的结果集不包含重复的行.

2. UNION ALL: 合并两个或多个select语句的查询结果集时, 不会自动去除重复的行, 直接将所有的行拼接在一起返回.

##### 排序处理:

1. UNION: 合并结果集后, 会对结果集进行排序操作
2. UNION ALL: 不会对合并后的结果集进行排序处理





















